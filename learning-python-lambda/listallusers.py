import boto3

# getting aws mgmt console programatically:
aws_mag_con=boto3.session.Session(profile_name="kfsoladmin")

#From the aws mgmt console, you get your IAM console:
iam_con=aws_mag_con.resource('iam') 

# fromm the iam conosle you have options what you watn to see:
  
for each_user in iam_con.users.all():
    print(each_user.name)
      
print( 'and now like https://www.ntweekly.com/2020/02/28/get-a-list-of-all-aws-iam-users-with-python-boto3/')
client = boto3.client('iam') 
response = client.list_users()
for x in response['Users']:
    print(x['UserName']) 
    
# with the resource object usage:
iam_con_re=aws_mag_con.resource('iam') 

# with the client object usage:
iam_con_cli=aws_mag_con.client('iam') 

for each_user in iam_con_re.users.all():
    print(each_user.name)
    
# output is like:
# alice
# AnsibleBook
# APIUser1
# azuredevops


p
# for each_user in iam_con_cli.list_users():
#     print(each_user.Users)
# DIT WERKT NIET.
# hij doet dit:
print(iam_con_cli.list_users())

#{u'Users': [{u'UserName': 'alice', u'PasswordLastUsed': datetime.datetime(2017, 9, 4, 7, 1, 43, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2017, 9, 3, 18, 12, 36, tzinfo=tzutc()), u'UserId': 'AIDAJWPIUTOVOXFQYNWOC', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/alice'}, {u'UserName': 'AnsibleBook', u'PasswordLastUsed': datetime.datetime(2021, 1, 3, 11, 10, 52, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2017, 7, 8, 20, 26, 25, tzinfo=tzutc()), u'UserId': 'AIDAIRTJUPWP4U66P44TE', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/AnsibleBook'}, {u'UserName': 'APIUser1', u'Path': '/', u'CreateDate': datetime.datetime(2021, 2, 7, 19, 16, 54, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVZ72FKQN27', u'Arn': 'arn:aws:iam::969526043371:user/APIUser1'}, {u'UserName': 'azuredevops', u'Path': '/', u'CreateDate': datetime.datetime(2020, 9, 2, 14, 33, 50, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLV4PVAYJWRP', u'Arn': 'arn:aws:iam::969526043371:user/azuredevops'}, {u'UserName': 'AzureDevOpsIamUser', u'Path': '/', u'CreateDate': datetime.datetime(2020, 9, 6, 19, 34, 8, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVX4OVWVMOM', u'Arn': 'arn:aws:iam::969526043371:user/AzureDevOpsIamUser'}, {u'UserName': 'bob', u'PasswordLastUsed': datetime.datetime(2017, 11, 14, 19, 24, 16, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2017, 9, 3, 18, 12, 36, tzinfo=tzutc()), u'UserId': 'AIDAJDBN2P2ZHHDUUHFZ2', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/bob'}, {u'UserName': 'cloudtraillogstreamcreator', u'Path': '/', u'CreateDate': datetime.datetime(2017, 10, 2, 6, 51, 43, tzinfo=tzutc()), u'UserId': 'AIDAIZWTADFYZOTTI77A6', u'Arn': 'arn:aws:iam::969526043371:user/cloudtraillogstreamcreator'}, {u'UserName': 'CodeDeploy', u'Path': '/', u'CreateDate': datetime.datetime(2020, 9, 9, 16, 59, 19, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLV2BGAEXOQ4', u'Arn': 'arn:aws:iam::969526043371:user/CodeDeploy'}, {u'UserName': 'demo', u'PasswordLastUsed': datetime.datetime(2018, 1, 21, 8, 52, 1, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2017, 12, 26, 7, 54, 22, tzinfo=tzutc()), u'UserId': 'AIDAJYYTHGHA2IEFKHBI6', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/demo'}, {u'UserName': 'deployment', u'Path': '/', u'CreateDate': datetime.datetime(2020, 5, 5, 12, 41, 20, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLV4CKD3J3P4', u'Arn': 'arn:aws:iam::969526043371:user/deployment'}, {u'UserName': 'DynamodbUser', u'Path': '/', u'CreateDate': datetime.datetime(2021, 2, 6, 6, 31, 16, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVRVKTA5POI', u'Arn': 'arn:aws:iam::969526043371:user/DynamodbUser'}, {u'UserName': 'eksadmin', u'PasswordLastUsed': datetime.datetime(2018, 7, 13, 13, 32, 49, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2018, 7, 11, 19, 7, 7, tzinfo=tzutc()), u'UserId': 'AIDAJ2FORMTT46TH4NAJO', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/eksadmin'}, {u'UserName': 'eksdude', u'Path': '/', u'CreateDate': datetime.datetime(2021, 2, 8, 17, 45, 1, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVWHGROPMSX', u'Arn': 'arn:aws:iam::969526043371:user/eksdude'}, {u'UserName': 'eksuser1', u'PasswordLastUsed': datetime.datetime(2018, 7, 8, 18, 59, 17, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2018, 7, 8, 17, 38, 21, tzinfo=tzutc()), u'UserId': 'AIDAIIIG7JTIH6HBZ74LO', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/eksuser1'}, {u'UserName': 'esadmin', u'Path': '/', u'CreateDate': datetime.datetime(2021, 1, 24, 16, 9, 45, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVXUXI5FKES', u'Arn': 'arn:aws:iam::969526043371:user/esadmin'}, {u'UserName': 'evita', u'PasswordLastUsed': datetime.datetime(2019, 1, 6, 15, 56, 38, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2018, 11, 12, 15, 20, 46, tzinfo=tzutc()), u'UserId': 'AIDAJIBJG2J7PA5KI2S24', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/evita'}, {u'UserName': 'jane.doe', u'PasswordLastUsed': datetime.datetime(2017, 8, 30, 9, 26, 6, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2017, 8, 30, 5, 16, 5, tzinfo=tzutc()), u'UserId': 'AIDAIWVIIR7D6XAJQ3QNW', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/jane.doe'}, {u'UserName': 'kfsoladmin', u'PasswordLastUsed': datetime.datetime(2022, 2, 9, 15, 50, 7, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2017, 7, 5, 12, 2, 30, tzinfo=tzutc()), u'UserId': 'AIDAJ2WX4545DX76RCC6S', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/kfsoladmin'}, {u'UserName': 'kfsolapp-dev-cicd', u'Path': '/', u'CreateDate': datetime.datetime(2021, 12, 6, 19, 3, 42, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVTE4IGYPTN', u'Arn': 'arn:aws:iam::969526043371:user/kfsolapp-dev-cicd'}, {u'UserName': 'kfsolapp-prd-cicd', u'Path': '/', u'CreateDate': datetime.datetime(2021, 12, 6, 19, 8, 24, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVVWUL5U62K', u'Arn': 'arn:aws:iam::969526043371:user/kfsolapp-prd-cicd'}, {u'UserName': 'kfsolapp-stg-cicd', u'Path': '/', u'CreateDate': datetime.datetime(2021, 12, 6, 19, 7, 14, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVZ4W24XGBM', u'Arn': 'arn:aws:iam::969526043371:user/kfsolapp-stg-cicd'}, {u'UserName': 'kfsoloper', u'PasswordLastUsed': datetime.datetime(2017, 7, 5, 12, 27, 3, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2017, 7, 5, 12, 24, 15, tzinfo=tzutc()), u'UserId': 'AIDAJN4JUGBSH3U2S6EDW', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/kfsoloper'}, {u'UserName': 'kfsols3readonly', u'Path': '/', u'CreateDate': datetime.datetime(2022, 2, 2, 20, 42, 56, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLV2SJNNSRHL', u'Arn': 'arn:aws:iam::969526043371:user/kfsols3readonly'}, {u'UserName': 'lambda-upload', u'Path': '/', u'CreateDate': datetime.datetime(2019, 5, 3, 15, 43, 48, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVWFCCSIKN4', u'Arn': 'arn:aws:iam::969526043371:user/lambda-upload'}, {u'UserName': 'learninglambda', u'Path': '/', u'CreateDate': datetime.datetime(2019, 4, 26, 15, 29, 28, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVZ2ELGBYTI', u'Arn': 'arn:aws:iam::969526043371:user/learninglambda'}, {u'UserName': 'morpheus', u'Path': '/', u'CreateDate': datetime.datetime(2021, 8, 2, 19, 39, 28, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVXIW25SFGI', u'Arn': 'arn:aws:iam::969526043371:user/morpheus'}, {u'UserName': 'neo', u'Path': '/', u'CreateDate': datetime.datetime(2021, 8, 2, 19, 39, 28, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVU5J6H37BW', u'Arn': 'arn:aws:iam::969526043371:user/neo'}, {u'UserName': 'OktaSSOserviceUser_us-east-2', u'Path': '/', u'CreateDate': datetime.datetime(2020, 4, 2, 16, 0, 35, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLV5ANBK4KNR', u'Arn': 'arn:aws:iam::969526043371:user/OktaSSOserviceUser_us-east-2'}, {u'UserName': 'OktaSSOuser', u'Path': '/', u'CreateDate': datetime.datetime(2020, 2, 25, 19, 9, 53, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVVGQ2WNINJ', u'Arn': 'arn:aws:iam::969526043371:user/OktaSSOuser'}, {u'UserName': 's3user', u'Path': '/', u'CreateDate': datetime.datetime(2020, 11, 24, 11, 2, 48, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVXSGL5IQGA', u'Arn': 'arn:aws:iam::969526043371:user/s3user'}, {u'UserName': 'ServiceCatalogUser', u'PasswordLastUsed': datetime.datetime(2021, 1, 17, 21, 0, 31, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2021, 1, 17, 20, 49, 28, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVTLOB3RX5N', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/ServiceCatalogUser'}, {u'UserName': 'ses-smtp-user.20200124-204940', u'Path': '/', u'CreateDate': datetime.datetime(2020, 1, 24, 19, 51, 37, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVWZDTFYYBS', u'Arn': 'arn:aws:iam::969526043371:user/ses-smtp-user.20200124-204940'}, {u'UserName': 'tetra-ecs', u'Path': '/', u'CreateDate': datetime.datetime(2019, 1, 4, 9, 50, 7, tzinfo=tzutc()), u'UserId': 'AIDAJDWTNHGNG6WN6U6O4', u'Arn': 'arn:aws:iam::969526043371:user/tetra-ecs'}, {u'UserName': 'trinity', u'Path': '/', u'CreateDate': datetime.datetime(2021, 8, 2, 19, 39, 28, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLV3OVTM4YZC', u'Arn': 'arn:aws:iam::969526043371:user/trinity'}, {u'UserName': 'userwithoutpolicy', u'Path': '/', u'CreateDate': datetime.datetime(2017, 10, 1, 14, 15, 50, tzinfo=tzutc()), u'UserId': 'AIDAJ3LEHWI5K3T3NLXUG', u'Arn': 'arn:aws:iam::969526043371:user/userwithoutpolicy'}], 'ResponseMetadata': {'RetryAttempts': 0, 'HTTPStatusCode': 200, 'RequestId': '062df7c3-ac36-43a7-832f-6bdfa2fb19cc', 'HTTPHeaders': {'x-amzn-requestid': '062df7c3-ac36-43a7-832f-6bdfa2fb19cc', 'date': 'Wed, 23 Feb 2022 20:31:54 GMT', 'content-length': '10105', 'content-type': 'text/xml'}}, u'IsTruncated': False}
#>>> 

# dit is een dictionary. Onder 'Users' krijg je een list. Vraag de list op met:
print(iam_con_cli.list_users()['Users'])
#[{u'UserName': 'alice', u'PasswordLastUsed': datetime.datetime(2017, 9, 4, 7, 1, 43, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2017, 9, 3, 18, 12, 36, tzinfo=tzutc()), u'UserId': 'AIDAJWPIUTOVOXFQYNWOC', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/alice'}, {u'UserName': 'AnsibleBook', u'PasswordLastUsed': datetime.datetime(2021, 1, 3, 11, 10, 52, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2017, 7, 8, 20, 26, 25, tzinfo=tzutc()), u'UserId': 'AIDAIRTJUPWP4U66P44TE', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/AnsibleBook'}, {u'UserName': 'APIUser1', u'Path': '/', u'CreateDate': datetime.datetime(2021, 2, 7, 19, 16, 54, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVZ72FKQN27', u'Arn': 'arn:aws:iam::969526043371:user/APIUser1'}, {u'UserName': 'azuredevops', u'Path': '/', u'CreateDate': datetime.datetime(2020, 9, 2, 14, 33, 50, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLV4PVAYJWRP', u'Arn': 'arn:aws:iam::969526043371:user/azuredevops'}, {u'UserName': 'AzureDevOpsIamUser', u'Path': '/', u'CreateDate': datetime.datetime(2020, 9, 6, 19, 34, 8, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVX4OVWVMOM', u'Arn': 'arn:aws:iam::969526043371:user/AzureDevOpsIamUser'}, {u'UserName': 'bob', u'PasswordLastUsed': datetime.datetime(2017, 11, 14, 19, 24, 16, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2017, 9, 3, 18, 12, 36, tzinfo=tzutc()), u'UserId': 'AIDAJDBN2P2ZHHDUUHFZ2', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/bob'}, {u'UserName': 'cloudtraillogstreamcreator', u'Path': '/', u'CreateDate': datetime.datetime(2017, 10, 2, 6, 51, 43, tzinfo=tzutc()), u'UserId': 'AIDAIZWTADFYZOTTI77A6', u'Arn': 'arn:aws:iam::969526043371:user/cloudtraillogstreamcreator'}, {u'UserName': 'CodeDeploy', u'Path': '/', u'CreateDate': datetime.datetime(2020, 9, 9, 16, 59, 19, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLV2BGAEXOQ4', u'Arn': 'arn:aws:iam::969526043371:user/CodeDeploy'}, {u'UserName': 'demo', u'PasswordLastUsed': datetime.datetime(2018, 1, 21, 8, 52, 1, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2017, 12, 26, 7, 54, 22, tzinfo=tzutc()), u'UserId': 'AIDAJYYTHGHA2IEFKHBI6', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/demo'}, {u'UserName': 'deployment', u'Path': '/', u'CreateDate': datetime.datetime(2020, 5, 5, 12, 41, 20, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLV4CKD3J3P4', u'Arn': 'arn:aws:iam::969526043371:user/deployment'}, {u'UserName': 'DynamodbUser', u'Path': '/', u'CreateDate': datetime.datetime(2021, 2, 6, 6, 31, 16, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVRVKTA5POI', u'Arn': 'arn:aws:iam::969526043371:user/DynamodbUser'}, {u'UserName': 'eksadmin', u'PasswordLastUsed': datetime.datetime(2018, 7, 13, 13, 32, 49, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2018, 7, 11, 19, 7, 7, tzinfo=tzutc()), u'UserId': 'AIDAJ2FORMTT46TH4NAJO', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/eksadmin'}, {u'UserName': 'eksdude', u'Path': '/', u'CreateDate': datetime.datetime(2021, 2, 8, 17, 45, 1, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVWHGROPMSX', u'Arn': 'arn:aws:iam::969526043371:user/eksdude'}, {u'UserName': 'eksuser1', u'PasswordLastUsed': datetime.datetime(2018, 7, 8, 18, 59, 17, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2018, 7, 8, 17, 38, 21, tzinfo=tzutc()), u'UserId': 'AIDAIIIG7JTIH6HBZ74LO', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/eksuser1'}, {u'UserName': 'esadmin', u'Path': '/', u'CreateDate': datetime.datetime(2021, 1, 24, 16, 9, 45, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVXUXI5FKES', u'Arn': 'arn:aws:iam::969526043371:user/esadmin'}, {u'UserName': 'evita', u'PasswordLastUsed': datetime.datetime(2019, 1, 6, 15, 56, 38, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2018, 11, 12, 15, 20, 46, tzinfo=tzutc()), u'UserId': 'AIDAJIBJG2J7PA5KI2S24', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/evita'}, {u'UserName': 'jane.doe', u'PasswordLastUsed': datetime.datetime(2017, 8, 30, 9, 26, 6, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2017, 8, 30, 5, 16, 5, tzinfo=tzutc()), u'UserId': 'AIDAIWVIIR7D6XAJQ3QNW', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/jane.doe'}, {u'UserName': 'kfsoladmin', u'PasswordLastUsed': datetime.datetime(2022, 2, 9, 15, 50, 7, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2017, 7, 5, 12, 2, 30, tzinfo=tzutc()), u'UserId': 'AIDAJ2WX4545DX76RCC6S', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/kfsoladmin'}, {u'UserName': 'kfsolapp-dev-cicd', u'Path': '/', u'CreateDate': datetime.datetime(2021, 12, 6, 19, 3, 42, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVTE4IGYPTN', u'Arn': 'arn:aws:iam::969526043371:user/kfsolapp-dev-cicd'}, {u'UserName': 'kfsolapp-prd-cicd', u'Path': '/', u'CreateDate': datetime.datetime(2021, 12, 6, 19, 8, 24, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVVWUL5U62K', u'Arn': 'arn:aws:iam::969526043371:user/kfsolapp-prd-cicd'}, {u'UserName': 'kfsolapp-stg-cicd', u'Path': '/', u'CreateDate': datetime.datetime(2021, 12, 6, 19, 7, 14, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVZ4W24XGBM', u'Arn': 'arn:aws:iam::969526043371:user/kfsolapp-stg-cicd'}, {u'UserName': 'kfsoloper', u'PasswordLastUsed': datetime.datetime(2017, 7, 5, 12, 27, 3, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2017, 7, 5, 12, 24, 15, tzinfo=tzutc()), u'UserId': 'AIDAJN4JUGBSH3U2S6EDW', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/kfsoloper'}, {u'UserName': 'kfsols3readonly', u'Path': '/', u'CreateDate': datetime.datetime(2022, 2, 2, 20, 42, 56, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLV2SJNNSRHL', u'Arn': 'arn:aws:iam::969526043371:user/kfsols3readonly'}, {u'UserName': 'lambda-upload', u'Path': '/', u'CreateDate': datetime.datetime(2019, 5, 3, 15, 43, 48, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVWFCCSIKN4', u'Arn': 'arn:aws:iam::969526043371:user/lambda-upload'}, {u'UserName': 'learninglambda', u'Path': '/', u'CreateDate': datetime.datetime(2019, 4, 26, 15, 29, 28, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVZ2ELGBYTI', u'Arn': 'arn:aws:iam::969526043371:user/learninglambda'}, {u'UserName': 'morpheus', u'Path': '/', u'CreateDate': datetime.datetime(2021, 8, 2, 19, 39, 28, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVXIW25SFGI', u'Arn': 'arn:aws:iam::969526043371:user/morpheus'}, {u'UserName': 'neo', u'Path': '/', u'CreateDate': datetime.datetime(2021, 8, 2, 19, 39, 28, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVU5J6H37BW', u'Arn': 'arn:aws:iam::969526043371:user/neo'}, {u'UserName': 'OktaSSOserviceUser_us-east-2', u'Path': '/', u'CreateDate': datetime.datetime(2020, 4, 2, 16, 0, 35, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLV5ANBK4KNR', u'Arn': 'arn:aws:iam::969526043371:user/OktaSSOserviceUser_us-east-2'}, {u'UserName': 'OktaSSOuser', u'Path': '/', u'CreateDate': datetime.datetime(2020, 2, 25, 19, 9, 53, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVVGQ2WNINJ', u'Arn': 'arn:aws:iam::969526043371:user/OktaSSOuser'}, {u'UserName': 's3user', u'Path': '/', u'CreateDate': datetime.datetime(2020, 11, 24, 11, 2, 48, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVXSGL5IQGA', u'Arn': 'arn:aws:iam::969526043371:user/s3user'}, {u'UserName': 'ServiceCatalogUser', u'PasswordLastUsed': datetime.datetime(2021, 1, 17, 21, 0, 31, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2021, 1, 17, 20, 49, 28, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVTLOB3RX5N', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/ServiceCatalogUser'}, {u'UserName': 'ses-smtp-user.20200124-204940', u'Path': '/', u'CreateDate': datetime.datetime(2020, 1, 24, 19, 51, 37, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLVWZDTFYYBS', u'Arn': 'arn:aws:iam::969526043371:user/ses-smtp-user.20200124-204940'}, {u'UserName': 'tetra-ecs', u'Path': '/', u'CreateDate': datetime.datetime(2019, 1, 4, 9, 50, 7, tzinfo=tzutc()), u'UserId': 'AIDAJDWTNHGNG6WN6U6O4', u'Arn': 'arn:aws:iam::969526043371:user/tetra-ecs'}, {u'UserName': 'trinity', u'Path': '/', u'CreateDate': datetime.datetime(2021, 8, 2, 19, 39, 28, tzinfo=tzutc()), u'UserId': 'AIDA6DPCBMLV3OVTM4YZC', u'Arn': 'arn:aws:iam::969526043371:user/trinity'}, {u'UserName': 'userwithoutpolicy', u'Path': '/', u'CreateDate': datetime.datetime(2017, 10, 1, 14, 15, 50, tzinfo=tzutc()), u'UserId': 'AIDAJ3LEHWI5K3T3NLXUG', u'Arn': 'arn:aws:iam::969526043371:user/userwithoutpolicy'}]
#>>> 
#Nu is 'Users' weg en heb je een list.
# En een list kun je in en LOOP gebruiken!

for each in iam_con_cli.list_users()['Users']:
    print(each)
#{u'UserName': 'alice', u'PasswordLastUsed': datetime.datetime(2017, 9, 4, 7, 1, 43, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2017, 9, 3, 18, 12, 36, tzinfo=tzutc()), u'UserId': 'AIDAJWPIUTOVOXFQYNWOC', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/alice'}
# {u'UserName': 'AnsibleBook', u'PasswordLastUsed': datetime.datetime(2021, 1, 3, 11, 10, 52, tzinfo=tzutc()), u'CreateDate': datetime.datetime(2017, 7, 8, 20, 26, 25, tzinfo=tzutc()), u'UserId': 'AIDAIRTJUPWP4U66P44TE', u'Path': '/', u'Arn': 'arn:aws:iam::969526043371:user/AnsibleBook'}

# dus iterate over elke user.

# Nu enkel de usernames:
for each in iam_con_cli.list_users()['Users']:
    print(each['UserName'])

#alice
#AnsibleBook

